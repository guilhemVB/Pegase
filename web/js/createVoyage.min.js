$().ready(function(){function a(a){if(a.id){var b=a.element[0].attributes.getNamedItem("data-destination-name");return b?b.value:a.text}var c=a.element[0].attributes.getNamedItem("data-country-code").value;return"<img class='flagSelectDestination flagCountrySmall' src='http://www.geonames.org/flags/x/"+c.toLowerCase()+".gif'/>"+a.text}$("#deparatureDate #deparatureDateContainer").datepicker({language:"fr",format:"dd-mm-yyyy",todayHighlight:!0,startDate:new Date}),$("#createVoyage .destination").select2({formatResult:a,formatSelection:a,escapeMarkup:function(a){return a},placeholder:"Choix d'un lieu de d√©part",theme:"bootstrap"}),$("#createVoyage button").on("click",function(){$("#voyageName").val()?$("#errorBlockName").addClass("hidden"):$("#errorBlockName").removeClass("hidden");var a=$("#deparatureDate #deparatureDateContainer").datepicker("getDate");a?$("#errorBlockDeparatureDate").addClass("hidden"):$("#errorBlockDeparatureDate").removeClass("hidden"),$("#createVoyage #selectDestination").val()?$("#errorBlockDestination").addClass("hidden"):$("#errorBlockDestination").removeClass("hidden")}),$("form").submit(function(a){a.preventDefault();var b=$("#deparatureDate #deparatureDateContainer").datepicker("getDate"),c={name:$("#voyageName").val(),deparatureDate:b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),destinationId:$("#createVoyage #selectDestination").val()};$("form button").button("loading"),$.post(voyageCRUDCreateUrl,c,function(a){document.location.href=a.nextUri},"json")})});