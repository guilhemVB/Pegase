$().ready(function(){function a(a){if(a.id){var b=a.element[0].attributes.getNamedItem("data-destination-name");return b?b.value:a.text}var c=a.element[0].attributes.getNamedItem("data-country-code").value;return"<img class='flagSelectDestination flagCountrySmall' src='http://www.geonames.org/flags/x/"+c.toLowerCase()+".gif'/>"+a.text}function b(a,b){var c={fromDestinationId:a,toDestinationId:b};$("#seeJourneyForm button").button("loading"),$(".btn-add-journey").button("loading"),$.get(getJourneyUrl,c,function(a){$("#availableJourneyModal").modal("show"),$("#fromDestinationModalName").text(a.fromDestination.name),$("#fromDestinationModalId").val(a.fromDestination.id),$("#toDestinationModalName").text(a.toDestination.name),$("#toDestinationModalId").val(a.toDestination.id),$("#latAndLon").text(a.toDestination.latitude+";"+a.toDestination.longitude+"/"+a.fromDestination.latitude+";"+a.fromDestination.longitude),$("#busTime").val(a.busTime),$("#busPrices").val(a.busPrices),$("#trainTime").val(a.trainTime),$("#trainPrices").val(a.trainPrices),$("#flyTime").val(a.flyTime),$("#flyPrices").val(a.flyPrices),$("#availableJourneyId").val(a.id),$("#seeJourneyForm button").button("reset"),$(".btn-add-journey").button("reset"),$("#fromDestination").val(null).trigger("change"),$("#toDestination").val(null).trigger("change")},"json")}$(".destination").select2({formatResult:a,formatSelection:a,escapeMarkup:function(a){return a},placeholder:"Choisir une destination",theme:"bootstrap"}),$("#seeJourneyForm").submit(function(a){a.preventDefault(),""!==$("#fromDestination").val()&&""!==$("#toDestination").val()&&b($("#fromDestination").val(),$("#toDestination").val())}),$(".btn-add-journey").on("click",function(){b($(this).data("fromDestinationId"),$(this).data("toDestinationId"))}),$("#editAvailableJourney").submit(function(a){a.preventDefault(),$("#editAvailableJourney button").button("loading"),$.post(editJourneyUrl,$("#editAvailableJourney").serialize(),function(a){location.reload()},"json")})});